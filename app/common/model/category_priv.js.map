{
    "version": 3,
    "sources": [
        "../../../src/common/model/category_priv.js"
    ],
    "names": [
        "priv",
        "catid",
        "roleid",
        "action",
        "is_admin",
        "type",
        "think",
        "cache",
        "select",
        "timeout",
        "list",
        "res",
        "isadd",
        "_",
        "filter",
        "Number",
        "isEmpty",
        "length",
        "model",
        "base"
    ],
    "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;AACI;;;;;;;;qBAQKA,I;+FAAKC,K,EAAMC,M,EAAOC,M;;;gBAAOC,Q,uEAAS,C;gBAAEC,I,uEAAK,I;;;;;;;;;mCAC1BC,MAAMC,KAAN,CAAY,UAAZ,EAAwB,YAAM;AAC3C,uCAAO,OAAKC,MAAL,EAAP;AACH,6BAFgB,EAEd,EAACC,SAAS,MAAM,EAAN,GAAW,IAArB,EAFc,C;;;AAAbC,gC;;AAGH;AACIC,+B,GAAI,C;AAEJC,iC,GAAQN,MAAMO,CAAN,CAAQC,MAAR,CAAeJ,IAAf,EAAqB,EAACT,OAAMc,OAAOd,KAAP,CAAP,EAAqBG,UAASW,OAAOX,QAAP,CAA9B,EAA+CD,QAAOA,MAAtD,EAArB,C;;;AAEZ,gCAAGG,MAAMU,OAAN,CAAcJ,KAAd,KAAsBP,IAAzB,EAA8B;AAC1BM,sCAAK,CAAL;AACH,6BAFD,MAEM;AACEX,qCADF,GACUM,MAAMO,CAAN,CAAQC,MAAR,CAAeF,KAAf,EAAqB,EAACV,QAAOa,OAAOb,MAAP,CAAR,EAArB,CADV;;AAEFS,sCAAKX,MAAKiB,MAAV;AACJ;6DACON,G;;;;;;;;;;;;;;;;;;EAzBcL,MAAMY,KAAN,CAAYC,I",
    "file": "../../../src/common/model/category_priv.js",
    "sourcesContent": [
        "// +----------------------------------------------------------------------\n// | Bieber [ 美媒网站内容管理框架 ]\n// +----------------------------------------------------------------------\n// | Copyright (c) 2017 http://www.gzxinbibo.com All rights reserved.\n// +----------------------------------------------------------------------\n// | Author: Tony <912697590@qq.com>\n// +----------------------------------------------------------------------\n'use strict';\n/**\n * model\n */\nexport default class extends think.model.base {\n//前台权限验证\n    /**\n     *缓存权限列表 all_priv\n     * @param catid 要验证的栏目id\n     * @param roleid 用户组\n     * @param action 权限类型\n     * @param is_admin 谁否前台\n     * @returns {number} 返回0 或1 0:没权限，1有权限。\n     */\n   async priv(catid,roleid,action,is_admin=0,type=true){\n       let list = await think.cache(\"all_priv\", () => {\n           return this.select();\n       }, {timeout: 365 * 24 * 3600});\n        //console.log(list);\n        let res=0;\n\n        let isadd = think._.filter(list, {catid:Number(catid),is_admin:Number(is_admin),action:action});\n\n        if(think.isEmpty(isadd)&&type){\n            res =1;\n        }else {\n            let priv =  think._.filter(isadd,{roleid:Number(roleid)});\n            res =priv.length;\n       }\n        return res;\n    }\n\n}"
    ]
}