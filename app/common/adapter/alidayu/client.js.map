{
    "version": 3,
    "sources": [
        "../../../../src/common/adapter/alidayu/client.js"
    ],
    "names": [
        "TopClient",
        "require",
        "init",
        "args",
        "send",
        "info",
        "think",
        "model",
        "config",
        "getset",
        "setup",
        "key",
        "isEmpty",
        "SMS_Key",
        "split",
        "console",
        "log",
        "result",
        "errno",
        "errmsg",
        "client",
        "execute",
        "deferred",
        "defer",
        "error",
        "response",
        "resolve",
        "promise",
        "adapter",
        "base"
    ],
    "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAIA,YAAYC,QAAQ,aAAR,EAAuBD,SAAvC;;;;;;;;;;AAEE;;;;mBAIAE,I,mBAAa;AAAA;;AAAA,sCAALC,IAAK;AAALA,UAAK;AAAA;;AACX,2DAAMD,IAAN,kDAAcC,IAAd;AACD,G;;mBACKC,I;2FAAKC,I;;;;;;;qBACSC,MAAMC,KAAN,CAAY,OAAZ,EAAoBD,MAAME,MAAN,CAAa,IAAb,CAApB,EAAuC,OAAvC,EAAgDC,MAAhD,E;;;AAAdC,mB;AACAC,iB;;kBACAL,MAAMM,OAAN,CAAcF,MAAMG,OAApB,C;;;;;AACFF,oBAAMD,MAAMG,OAAN,CAAcC,KAAd,CAAoB,GAApB,CAAN;AACAC,sBAAQC,GAAR,CAAYL,GAAZ;;oBACGL,MAAMM,OAAN,CAAcD,IAAI,CAAJ,CAAd,KAAuBL,MAAMM,OAAN,CAAcD,IAAI,CAAJ,CAAd,C;;;;;+CACjB,EAACM,QAAQ,EAAEC,OAAO,MAAT,EAAiBC,QAAQ,aAAzB,EAAT,E;;;AACR;;;;;;+CAGM,EAACF,QAAQ,EAAEC,OAAO,MAAT,EAAiBC,QAAQ,aAAzB,EAAT,E;;;AAELC,oB,GAAS,IAAIpB,SAAJ,CAAc;AACzB,0BAAUW,IAAI,CAAJ,CADe;AAEzB,6BAAaA,IAAI,CAAJ,CAFY;AAGzB,4BAAY;AAHa,eAAd,C;;AAKTU,qB,GAAS,SAATA,OAAS,GAAK;AAChB,oBAAIC,WAAWhB,MAAMiB,KAAN,EAAf;AACAH,uBAAOC,OAAP,CAAe,gCAAf,EAAiDhB,IAAjD,EAAuD,UAASmB,KAAT,EAAgBC,QAAhB,EAA0B;AAC/E,sBAAI,CAACD,KAAL,EAAW;AACTF,6BAASI,OAAT,CAAiBD,QAAjB;AACD,mBAFD,MAEM;AACJH,6BAASI,OAAT,CAAiBF,KAAjB;AACD;AAEF,iBAPD;AAQA,uBAAOF,SAASK,OAAhB;AACD,e;;;qBACYN,S;;;;;;;;;;;;;;;;;;;;;EAtCYf,MAAMsB,OAAN,CAAcC,I",
    "file": "../../../../src/common/adapter/alidayu/client.js",
    "sourcesContent": [
        "// +----------------------------------------------------------------------\n// | Bieber [ 美媒网站内容管理框架 ]\n// +----------------------------------------------------------------------\n// | Copyright (c) 2017 http://www.gzxinbibo.com All rights reserved.\n// +----------------------------------------------------------------------\n// | Author: Tony <912697590@qq.com>\n// +----------------------------------------------------------------------\n'use strict';\n/**\n * base adapter\n */\nlet TopClient = require('./topclient').TopClient;\nexport default class extends think.adapter.base {\n  /**\n   * init\n   * @return {[]}         []\n   */\n  init(...args){\n    super.init(...args);\n  }\n  async send(info){\n    let setup = await think.model(\"setup\",think.config(\"db\"),\"admin\").getset();\n    let key;\n    if(!think.isEmpty(setup.SMS_Key)){\n      key = setup.SMS_Key.split(\"|\");\n      console.log(key);\n      if(think.isEmpty(key[0])||think.isEmpty(key[1])){\n        return {result: { errno: '1000', errmsg: '请在后台配合正确的凭着'}}\n      };\n\n    }else {\n      return {result: { errno: '1000', errmsg: '请在后台配合正确的凭着'}}\n    }\n    let client = new TopClient({\n      'appkey': key[0],\n      'appsecret': key[1],\n      'REST_URL': 'http://gw.api.taobao.com/router/rest'\n    });\n    let execute =()=> {\n      let deferred = think.defer();\n      client.execute('alibaba.aliqin.fc.sms.num.send', info, function(error, response) {\n        if (!error){\n          deferred.resolve(response);\n        }else {\n          deferred.resolve(error);\n        }\n\n      })\n      return deferred.promise;\n    }\n    return await execute();\n  }\n}"
    ]
}